# Attitude Estimation

Program that reads a log file containing data generated by an accelerometer and produces an output file with the corresponding attitude estimation. The attitude is estimated following the aerospace rotation sequence, that is, the sequence **yaw ‚Üí pitch ‚Üí roll**.

## üìà File Formatting and Physical Units

### Accelerometer Data

The accelerometer data file must contain accelerometer data whose lines follow the format:

`<time_stamp_ms; accel_x_axis; accel_y_axis; accel_z_axis>`

Where:

* **time_stamp_ms** is an integer number representing the timestamp of the measurements in [ms]
* **accel_x_axis** is an integer number representing the x-axis reading of the accelerometer in [mg]
* **accel_y_axis** is an integer number representing the y-axis reading of the accelerometer in [mg]
* **accel_z_axis** is an integer number representing the z-axis reading of the accelerometer in [mg]

### Attitude Estimation Data

The output attitude estimation data file contains attitude estimation data whose lines follow the format:

`<time_stamp_ms; roll; pitch>`

Where:

* **time_stamp_ms** is an integer number representing the timestamp of the measurements in [ms]
* **roll** is a real number representing the roll angle in [rad]
* **pitch** is a real number representing the pitch angle in [rad]

## üíª Program Requirements

Before compiling the program, please verify that you have installed:

* [`cmake`][1] 3.0.0 or later
* [`GCC`][2] 11.2 or later

## ‚òï Compiling

In order to compile this project, run the following commands in the terminal inside the folder containing the project files:

Linux:

```
cmake -B build
```

```
cmake --build ./build
```

## üöÄ Running

Run the following command in the terminal inside the folder containing the project files:
```
./build/attitude-estimation <accelerometer_data_file_path> <attitude_estimation_data_file_path>
```
Where:

* `<accelerometer_data_file_path>` is the path to the .log file containing the accelerometer data.
* `<attitude_estimation_data_file_path>` is the desired path to the file to contain the estimated attitude data.

If the program runs successfully, the following message is displayed:

`Attitude estimation data successfully written to <attitude_estimation_data_file_path>`

## ‚ùó Exceptions

* If for any reason the program is not able to open the accelerometer data file, its execution is terminated and the following exception is thrown:

`Error: could not open <accelerometer_data_file_path>`

* If for any reason the program is not able to create and open an attitude estimation data file, its execution is also terminated and the following exception is thrown:

`Error: could not write attitude estimation data to <attitude_estimation_data_file_path>`

## ü§ñ How this task was performed

### Designing the Program Architecture

I started this task by designing the architecture of the program in terms of what classes and functions would be necessary to build it.

### Setting up the Tools

Then, I set up my git environment by creating a new project and repository and doing all the necessary configurations. After that, I started working on Visual Studio Code by preparing a project template to build the project with CMake.

### Coding and Testing

Having a design plan for the program and my git and VSCode environments set up, I could finally start developping. For each one of the important blocks of code, firstly I wrote the corresponding .h and .cpp files and then I created another .cpp file to test it. A test program was made for each one of the classes as well as for the function that writes the output file. Once I finished, tested and approved a given block of code, I pushed the modifications to git and moved to the next block. Each one of the more important commits of the project also received a git tag for semantic versioning.

### Design Corrections

Throughout this process I noticed that some of the initial design choices were not ideal, and some corrections had to be made to the already created and tested classes. Nevertheless, the test programs helped me perform and verify the execution of all classes after those modifications whenever necessary.

### First Run

After having written and tested each one of the main blocks of the program, I could easily put all of them together in the main.cpp file and run the complete program for the first time.

[1]: https://cmake.org
[2]: https://gcc.gnu.org
